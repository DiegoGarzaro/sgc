<div class="row flex-nowrap">
  <div class="col-auto col-md-0 col-xl-0 px-0 bg-dark">
    <div class="d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 text-white">
      <!-- Toggle Button for Small Screens -->
      <button class="btn btn-dark d-block d-sm-none mb-3" type="button" data-bs-toggle="collapse"
        data-bs-target="#menuCollapse" aria-expanded="false" aria-controls="menuCollapse">
        <i class="bi bi-list fs-4"></i>
      </button>

      <!-- Sidebar Menu -->
      <div class="collapse d-sm-block" id="menuCollapse">
        <ul class="nav flex-column align-items-start" id="menu">
          <li><a href="{% url 'home' %}" class="nav-link px-0 align-middle"><i class="bi bi-speedometer2 fs-4"></i> <span
                class="ms-1">Dashboard</span></a></li>
          {% if perms.components.view_component %}
          <li><a href="{% url 'component_list' %}" class="nav-link px-0 align-middle"><i class="bi bi-cpu fs-4"></i>
              <span class="ms-1">Componentes</span></a></li>
          {% endif %}
          {% if perms.categories.view_category %}
          <li><a href="{% url 'category_list' %}" class="nav-link px-0 align-middle"><i class="bi bi-tag fs-4"></i>
              <span class="ms-1">Categorias</span></a></li>
          {% endif %}
          {% if perms.sub_categories.view_subcategory %}
          <li><a href="{% url 'sub_category_list' %}" class="nav-link px-0 align-middle"><i class="bi bi-tags fs-4"></i>
              <span class="ms-1">Sub-Categorias</span></a></li>
          {% endif %}
          {% if perms.packages.view_package %}
          <li><a href="{% url 'package_list' %}" class="nav-link px-0 align-middle"><i
                class="bi bi-motherboard fs-4"></i> <span class="ms-1">Encapsulamentos</span></a></li>
          {% endif %}
          {% if perms.brands.view_brand %}
          <li><a href="{% url 'brand_list' %}" class="nav-link px-0 align-middle"><i class="bi bi-shop fs-4"></i> <span
                class="ms-1">Fabricantes</span></a></li>
          {% endif %}
          <!-- {% if perms.products.view_product %}
          <li><a href="#" class="nav-link px-0 align-middle"><i class="bi bi-box-seam fs-4"></i> <span
                class="ms-1">Produtos</span></a></li>
          {% endif %} -->
          {% if perms.suppliers.view_supplier %}
          <li><a href="{% url 'supplier_list' %}" class="nav-link px-0 align-middle"><i class="bi bi-truck fs-4"></i>
              <span class="ms-1">Fornecedores</span></a></li>
          {% endif %}
        </ul>
      </div>
      <hr>

      <!-- User Profile Section -->
      <div class="mt-auto p-3 border-top border-secondary">
        {% if user.is_authenticated %}
        <div class="user-section">
          <!-- User Info -->
          <div class="d-flex align-items-center justify-content-between mb-1">
            <div class="d-flex align-items-center gap-2">
              <div class="user-avatar">
                <div class="rounded-circle bg-primary bg-opacity-10 d-flex align-items-center justify-content-center"
                  style="width: 38px; height: 38px;">
                  <span class="text-primary fw-semibold" style="font-size: 16px;">
                    {{ user.username|make_list|first|upper }}
                  </span>
                </div>
              </div>
              <div class="user-info">
                <h6 class="mb-0 text-white fw-semibold">{{ user.username }}</h6>
                {% if user.is_staff %}
                <span class="badge rounded-pill text-bg-primary" style="font-size: 0.65rem;">Administrador</span>
                {% endif %}
              </div>
            </div>

            <!-- Settings Dropdown -->
            <div class="dropdown">
              <button class="btn btn-link text-white p-1 opacity-75 hover-opacity-100" type="button"
                data-bs-toggle="dropdown" aria-expanded="false" style="transition: opacity 0.2s;">
                <i class="bi bi-three-dots-vertical"></i>
              </button>
              <ul class="dropdown-menu dropdown-menu-end dropdown-menu-dark shadow-sm" style="min-width: 200px;">
                <!-- <li>
                  <a class="dropdown-item text-white-50 hover-bg-opacity-10" href="#">
                    <i class="bi bi-person me-2"></i>Profile
                  </a>
                </li>
                <li>
                  <a class="dropdown-item text-white-50 hover-bg-opacity-10" href="#">
                    <i class="bi bi-gear me-2"></i>Settings
                  </a>
                </li>
                <li>
                  <hr class="dropdown-divider border-secondary">
                </li>
                <li> -->
                  <form method="post" action="{% url 'logout' %}">
                    {% csrf_token %}
                    <button type="submit" class="dropdown-item text-danger hover-bg-opacity-10">
                      <i class="bi bi-box-arrow-right me-2"></i>Logout
                    </button>
                  </form>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <style>
          /* Custom styles for user section */
          .hover-opacity-100:hover {
            opacity: 1 !important;
          }

          .hover-bg-opacity-10:hover {
            background-color: rgba(255, 255, 255, 0.1) !important;
          }

          .dropdown-item {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
          }

          .user-info h6 {
            font-size: 0.9rem;
            line-height: 1.2;
          }

          .dropdown-menu {
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 0.5rem;
          }

          .dropdown-item {
            transition: background-color 0.2s;
          }
        </style>
        {% else %}
        <script>window.location.href = "{% url 'login' %}";</script>
        {% endif %}
      </div>
    </div>
  </div>
</div>